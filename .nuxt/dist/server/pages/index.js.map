{"version":3,"file":"pages/index.js","sources":["webpack:///./pages/index.vue","webpack:///./assets/images/gt.svg","webpack:///./api/append-http.js","webpack:///./pages/index.vue?b1d0","webpack:///./pages/index.vue?ff57","webpack:///./pages/index.vue?b7d3"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { PlusIcon, ExternalLinkIcon, CopyIcon, LinkIcon, CoffeeIcon } from 'vue-feather-icons';\nimport moment from 'moment';\nimport appendHttp from '../api/append-http';\n\nexport default {\n  components: {\n    PlusIcon,\n    ExternalLinkIcon,\n    CopyIcon,\n    LinkIcon,\n    CoffeeIcon\n  },\n  data() {\n    return {\n      isFocused: false,\n      disabled: false,\n      copied: false,\n      form: {\n        slug: '',\n        url: ''\n      }\n    }\n  },\n\n  mounted() {\n    this.focusInput();\n  },\n\n  filters: {\n    moment: function (date) {\n      return moment(date).format('Do MMMM YYYY');\n    }\n  },\n  computed: {\n    isNotUrl: function() {\n      if(this.form.url.length >= 1) {\n        return !this.form.url.match(this.pattern);\n      }\n    }\n  },\n  methods: {\n    parse(string) {\n      return JSON.parse(string);\n    },\n    focusInput() {\n      if(this.urls > 0) {\n        this.$refs.brewname.focus();\n      }\n    },\n    copy(slug) {\n\n      let url = `${this.appUrl}/${slug}`;\n      this.copied = !this.copied;\n      \n      try {\n        const el = document.createElement('textarea');\n        el.value = url;\n        document.body.appendChild(el);\n        el.select();\n        document.execCommand('copy');\n        document.body.removeChild(el);\n\n        setTimeout(() => {\n          this.copied = !this.copied;\n        }, 2000);       \n\n        this.$toasted.success('Copied!', {\n          theme: \"outline\", \n          position: \"bottom-center\", \n          duration : 5000\n        });\n\n      } catch(err) {\n        console.log(err);\n      }\n    },\n    async submit() {\n\n      if(this.form.url == '') {\n        return\n      }\n\n      if(this.form.slug.length > 12) {\n        this.$toasted.error('Brew name can\\'t be more than 12 characters', {\n          theme: \"outline\", \n          position: \"bottom-center\", \n          duration : 5000\n        });\n        return;\n      }\n\n      this.disabled = !this.disabled;\n\n      let host = new URL(appendHttp(this.form.url)).host;\n      let banned = this.banned.find(o => o.parent_domain === host);\n      let short = this.short.find(o => o === host);\n\n      if(short) {\n        this.disabled = !this.disabled;\n        this.$toasted.error('We can\\'t brew an already shortened URL', {\n          theme: \"outline\", \n          position: \"bottom-center\", \n          duration : 5000\n        });\n        return;\n      }\n\n\n\n      if(banned) {\n        this.disabled = !this.disabled;\n        this.$toasted.error('We don\\'t brew dirty links...', {\n          theme: \"outline\", \n          position: \"bottom-center\", \n          duration : 5000\n        });\n        return;\n      }\n\n      let slugExists = this.urls.find(o => o.slug === this.form.slug);\n      if(slugExists) {\n        this.disabled = !this.disabled;\n        this.$toasted.error('This brew name has been used', {\n          theme: \"outline\", \n          position: \"bottom-center\", \n          duration : 5000\n        });\n        return;\n      }\n\n      if(!this.form.url.match(this.pattern)) {\n        this.$toasted.error('Have you tried brewing a valid URL?', {\n          theme: \"outline\", \n          position: \"bottom-center\", \n          duration : 5000\n        });\n        return\n      }\n\n      this.$store.dispatch('setUrl', this.loader);\n      this.form.meta = {\n        colour: Math.floor(Math.random()*16777215).toString(16)\n      };\n\n      await this.$axios.post('/api', this.form).then(response => {\n        this.$store.dispatch('clearLoader');\n        this.$store.dispatch('setUrl', response.data);\n        this.form.slug = '';\n        this.form.url  = '';\n        this.disabled = !this.disabled;\n\n        this.$toasted.success(response.data.message, {\n          theme: \"outline\", \n          position: \"bottom-center\", \n          duration : 5000\n        });\n\n      }).catch(error => {\n        this.disabled = !this.disabled;\n        setTimeout(() => {\n          this.$store.dispatch('clearLoader');\n        }, 2000);\n        this.$toasted.error(error.response.data.message, {\n          theme: \"outline\", \n          position: \"bottom-center\", \n          duration : 5000\n        });\n      });\n      \n    },\n    setFocus(focus) {\n      this.isFocused = focus;\n    }\n  },\n  \n};\n","module.exports = __webpack_public_path__ + \"img/gt.5b4f721.svg\";","const appendHttp = (url) => {\n    if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n        if(!url.match('www.')) {\n            url = \"https://\" + url;\n        } else {\n            url = \"https://\" + url;\n        }\n    } else  if (/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n        if(url.match('https://www.')) {\n            return url;\n        } else {\n            host = url.replace('https://', '');\n            url = `https://${host}`;\n        }\n    }\n\n    return url;\n};\n\nmodule.exports = appendHttp;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"geektube\"}},[_vm._ssrNode(\"<form id=\\\"shtn\\\">\",\"</form>\",[_vm._ssrNode(\"<div class=\\\"gt-logo\\\"><img\"+(_vm._ssrAttr(\"src\",require(\"assets/images/gt.svg\")))+\" alt=\\\"geektu.be\\\"></div> <div><input type=\\\"text\\\" id=\\\"slug\\\" name=\\\"slug\\\" placeholder=\\\"Give your brew a name (Can be left empty)\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.slug)))+\" class=\\\"input\\\"></div> <div\"+(_vm._ssrClass(null,{ invalid: _vm.isNotUrl && _vm.isFocused}))+\"><input id=\\\"url\\\" name=\\\"url\\\" placeholder=\\\"Brew yourself a short URL\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.url)))+\" class=\\\"input\\\"></div> \"),_vm._ssrNode(\"<button type=\\\"submit\\\"\"+(_vm._ssrAttr(\"disabled\",_vm.disabled == true))+(_vm._ssrClass(null,{ btnActive: !_vm.isNotUrl && _vm.isFocused}))+\">\",\"</button>\",[_c('plus-icon',{style:({color: 'white'}),attrs:{\"size\":\"3x\"}})],1)],2),_vm._ssrNode(\" \"),(_vm.urls.length < 1)?_vm._ssrNode(\"<div class=\\\"empty__urls\\\">\",\"</div>\",[_vm._ssrNode(\"<span>\",\"</span>\",[_c('coffee-icon',{attrs:{\"size\":\"1x\"}}),_vm._ssrNode(\" Nothing here. Try brewing a URL.\\n    \")],2)]):_vm._e(),_vm._ssrNode(\" \"),(_vm.urls.length > 0)?_vm._ssrNode(\"<div class=\\\"container\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"grid\\\">\",\"</div>\",_vm._l((_vm.urls),function(url,index){return _vm._ssrNode(\"<div class=\\\"grid__item\\\">\",\"</div>\",[(!url.isLoading)?_vm._ssrNode(\"<div class=\\\"url link__item\\\">\",\"</div>\",[_vm._ssrNode(\"<img\"+(_vm._ssrAttr(\"src\",(\"/thumbs/\" + (_vm.parse(url.meta).file))))+\" title class=\\\"responsive-img\\\"> \"),_vm._ssrNode(\"<article class=\\\"title\\\">\",\"</article>\",[_vm._ssrNode(\"<div class=\\\"link__info\\\"><h4>\"+_vm._ssrEscape(_vm._s(url.slug))+\"</h4></div> \"),_vm._ssrNode(\"<div class=\\\"link__actions\\\">\",\"</div>\",[_vm._ssrNode(\"<button\"+(_vm._ssrAttr(\"disabled\",_vm.copied == true))+\" class=\\\"external\\\" style=\\\"background:none; border:none;\\\">\",\"</button>\",[_vm._ssrNode(\"<span class=\\\"external__icon\\\">\",\"</span>\",[_c('copy-icon',{attrs:{\"size\":\"1x\"}})],1)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<a target=\\\"_blank\\\"\"+(_vm._ssrAttr(\"href\",(\"/\" + (url.slug))))+\" class=\\\"external\\\">\",\"</a>\",[_vm._ssrNode(\"<span class=\\\"external__icon\\\">\",\"</span>\",[_c('external-link-icon',{attrs:{\"size\":\"1x\"}})],1)])],2)],2)],2):_vm._e(),_vm._ssrNode(\" \"+((url.isLoading)?(\"<div class=\\\"isloading\\\">\\n            Generating...\\n        </div>\"):\"<!---->\"))],2)}),0)]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=61308aa4&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"d78d5d18\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAJA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAEA;AACA;AAAA;AACA;AACA;AACA;AArIA;AApCA;;;;;;;;AC/DA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnBA;AACA;AACA;;;;;;;;ACFA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}